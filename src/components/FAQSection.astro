---
/**
 * FAQSection Component
 * Displays FAQ with schema markup for SEO
 */

interface FAQItem {
  question: string;
  answer: string;
}

interface Props {
  faqs: FAQItem[];
  title?: string;
}

const { faqs, title = 'Frequently Asked Questions' } = Astro.props;

// Generate JSON-LD FAQ schema
const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": faqs.map(faq => ({
    "@type": "Question",
    "name": faq.question,
    "acceptedAnswer": {
      "@type": "Answer",
      "text": faq.answer
    }
  }))
};
---

<section class="faq-section bg-dark-gray rounded-xl p-6 sm:p-8 my-8">
  <h2 class="text-2xl sm:text-3xl font-bold text-off-white mb-6">
    {title}
  </h2>

  <div class="space-y-4">
    {faqs.map((faq, index) => (
      <details class="faq-item bg-off-black rounded-lg overflow-hidden group">
        <summary class="faq-question flex justify-between items-center p-4 cursor-pointer hover:bg-gold/5 transition-colors">
          <span class="font-semibold text-off-white pr-4">
            {faq.question}
          </span>
          <svg class="w-5 h-5 text-gold flex-shrink-0 transform group-open:rotate-180 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
          </svg>
        </summary>
        <div class="faq-answer px-4 pb-4 text-gray-300">
          <hr class="border-gray-800 my-3" />
          <div set:html={faq.answer} />
        </div>
      </details>
    ))}
  </div>
</section>

<!-- JSON-LD FAQ Schema -->
<script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />

<style>
  details > summary {
    list-style: none;
  }

  details > summary::-webkit-details-marker {
    display: none;
  }

  .faq-item[open] .faq-question {
    background-color: rgba(234, 179, 8, 0.05);
  }
</style>
